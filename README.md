iot-beaglebone
==============

This repository contains working samples illustrating some of the options for building client software to the IBM Internet of Things Cloud
on the TI BeagleBone.

There are currently 2 samples with similar function implemented in node.js and node-red.

Sample Recipes for BeagleBone
======================
Use a BeagleBone Black board to connect a TI SensorTag to the IoT cloud. Then you can visualize the data generated by the SensorTag's temperature, humidity, pressure, accelerometer, gyroscope and magnetometer sensors.
Ingredients
===========
For this recipe you will need:

a BeagleBone Black
a TI SensorTag CC2541
a Bluetooth Low Energy (Type 4) USB adapter to connect the SensorTag to the BeagleBone (for example, http://plugable.com/products/usb-bt4le). 
Prepare
You need to complete a few tasks to prepare your BeagleBone for connection to the IoT Cloud.  
1. Get Debian Linux for your BeagleBone. You can install Debian Linux on a Micro SD card and boot the  BeagleBone from there. For downloading Debian Linux and booting from a Micro SD card, see http://beagleboard.org/latest-images.
2. With Debian Linux running, connect your BeagleBone to a Windows or Linux computer, using the supplied USB cable. If you are using a Windows, you need to install some drivers to access your BeagleBone, see http://beagleboard.org/Getting Started.
3. Run SSH on your computer and connect to the BeagleBoard at 192.168.7.2.  
4. Connect your SensorTag to your BeagleBoard (how?)

Connect
=======
You're now ready to download and run software for connecting to the IoT Cloud.

Log in to Debian as root (by default, no password is required).
Clone the GitHub project: git clone https://ibm_messaging/iot-beaglebone


For the node.js sample:
cd nodejs
Run setup.sh. This completes the following tasks:
Installs required node packages – async, sensortag, MQTT – using npm.
Run the samples with: node ibm_iot_sensortag_quickstart.js

This sample runs in the foreground and will need to be restarted if the connection is lost of the SensorTag disconnects.
Press the button on the side of the SensorTag so that it starts sending sense data to IoT Cloud.
The sample will display the MAC address on the console.


For the node-red sample:
cd nodered
Run setup.sh. This completes the following tasks:
Installs node-red, contributed nodes, npm requisites, and configures a system service to run a supplied flow.
This make take a few minutes. When it successfully completes the flow should be running.
You can connect a browser to port 1880 in order to see the flow and use debug nodes to show events issued.
Press the button on the side of the SensorTag so that it starts sending sense data to IoT Cloud.

Find out what you MAC address is. Do this by looking at the application log file (where?) and noting the device id (you will need this when you come to visualize the data).

Visualize
=========
You can now use the IoT web site to visualize the data that your SensorTag is generating.

Enter your MAC address in the <name> Field. 
You jump to the IoT web site, where you can see a visual representation of the output from the sensors on your SensorTag.


TODO
====
Use the iot cloud output node in node-red flow.

